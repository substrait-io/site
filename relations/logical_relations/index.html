<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Substrait is a new specification and set of tools that allow different systems to express clear data manipulation operations."><link href=https://substrait.io/relations/logical_relations/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.6"><title>Logical Relations - Substrait: Cross-Language Serialization for Relational Algebra</title><link rel=stylesheet href=../../assets/stylesheets/main.802231af.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css><meta name=theme-color content=#e92063><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-57ZX8S93Q5"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-57ZX8S93Q5",{page_path:t.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-57ZX8S93Q5"></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=pink data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#logical-relations class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Substrait: Cross-Language Serialization for Relational Algebra" class="md-header__button md-logo" aria-label="Substrait: Cross-Language Serialization for Relational Algebra" data-md-component=logo> <img src=../../img/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Substrait: Cross-Language Serialization for Relational Algebra </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Logical Relations </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/substrait-io/substrait title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../spec/specification/ class=md-tabs__link> Spec </a> </li> <li class=md-tabs__item> <a href=../../types/simple_logical_types/ class=md-tabs__link> Types </a> </li> <li class=md-tabs__item> <a href=../../expressions/field_references/ class=md-tabs__link> Expressions </a> </li> <li class=md-tabs__item> <a href=../basics/ class="md-tabs__link md-tabs__link--active"> Relations </a> </li> <li class=md-tabs__item> <a href=../../serialization/binary_serialization/ class=md-tabs__link> Serialization </a> </li> <li class=md-tabs__item> <a href=../../extensions/ class=md-tabs__link> Extensions </a> </li> <li class=md-tabs__item> <a href=../../community/ class=md-tabs__link> Community </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Substrait: Cross-Language Serialization for Relational Algebra" class="md-nav__button md-logo" aria-label="Substrait: Cross-Language Serialization for Relational Algebra" data-md-component=logo> <img src=../../img/logo.svg alt=logo> </a> Substrait: Cross-Language Serialization for Relational Algebra </label> <div class=md-nav__source> <a href=https://github.com/substrait-io/substrait title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 data-md-state=indeterminate type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Spec <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Spec data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Spec </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../spec/specification/ class=md-nav__link> Specification </a> </li> <li class=md-nav__item> <a href=../../spec/technology_principles/ class=md-nav__link> Technology Principles </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 data-md-state=indeterminate type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Types <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Types data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Types </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../types/simple_logical_types/ class=md-nav__link> Simple Types </a> </li> <li class=md-nav__item> <a href=../../types/compound_logical_types/ class=md-nav__link> Compound Types </a> </li> <li class=md-nav__item> <a href=../../types/type_variations/ class=md-nav__link> Type Variations </a> </li> <li class=md-nav__item> <a href=../../types/type_parsing/ class=md-nav__link> Type Syntax Parsing </a> </li> <li class=md-nav__item> <a href=../../types/user_defined_types/ class=md-nav__link> User Defined Types </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 data-md-state=indeterminate type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Expressions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Expressions data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Expressions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../expressions/field_references/ class=md-nav__link> Field References </a> </li> <li class=md-nav__item> <a href=../../expressions/scalar_functions/ class=md-nav__link> Scalar Functions </a> </li> <li class=md-nav__item> <a href=../../expressions/aggregate_functions/ class=md-nav__link> Aggregate Functions </a> </li> <li class=md-nav__item> <a href=../../expressions/specialized_record_expressions/ class=md-nav__link> Specialized Record Expressions </a> </li> <li class=md-nav__item> <a href=../../expressions/window_functions/ class=md-nav__link> Window Functions </a> </li> <li class=md-nav__item> <a href=../../expressions/table_functions/ class=md-nav__link> Table Functions </a> </li> <li class=md-nav__item> <a href=../../expressions/user_defined_functions/ class=md-nav__link> User Defined Functions </a> </li> <li class=md-nav__item> <a href=../../expressions/embedded_functions/ class=md-nav__link> Embedded Functions </a> </li> <li class=md-nav__item> <a href=../../expressions/subqueries/ class=md-nav__link> Subqueries </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Relations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Relations data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Relations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../basics/ class=md-nav__link> Basics </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Logical Relations <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Logical Relations </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#read-operator class=md-nav__link> Read Operator </a> <nav class=md-nav aria-label="Read Operator"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#read-properties class=md-nav__link> Read Properties </a> </li> <li class=md-nav__item> <a href=#read-definition-types class=md-nav__link> Read Definition Types </a> <nav class=md-nav aria-label="Read Definition Types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#virtual-table class=md-nav__link> Virtual Table </a> </li> <li class=md-nav__item> <a href=#files-type class=md-nav__link> Files Type </a> <nav class=md-nav aria-label="Files Type"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#slicing-files class=md-nav__link> Slicing Files </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#filter-operation class=md-nav__link> Filter Operation </a> <nav class=md-nav aria-label="Filter Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#filter-properties class=md-nav__link> Filter Properties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sort-operation class=md-nav__link> Sort Operation </a> <nav class=md-nav aria-label="Sort Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sort-properties class=md-nav__link> Sort Properties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#project-operation class=md-nav__link> Project Operation </a> <nav class=md-nav aria-label="Project Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#project-properties class=md-nav__link> Project Properties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cross-product-operation class=md-nav__link> Cross Product Operation </a> <nav class=md-nav aria-label="Cross Product Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cross-product-properties class=md-nav__link> Cross Product Properties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#join-operation class=md-nav__link> Join Operation </a> <nav class=md-nav aria-label="Join Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#join-properties class=md-nav__link> Join Properties </a> </li> <li class=md-nav__item> <a href=#join-types class=md-nav__link> Join Types </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#set-operation class=md-nav__link> Set Operation </a> <nav class=md-nav aria-label="Set Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#set-properties class=md-nav__link> Set Properties </a> </li> <li class=md-nav__item> <a href=#set-operation-types class=md-nav__link> Set Operation Types </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#fetch-operation class=md-nav__link> Fetch Operation </a> <nav class=md-nav aria-label="Fetch Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#fetch-properties class=md-nav__link> Fetch Properties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#aggregate-operation class=md-nav__link> Aggregate Operation </a> <nav class=md-nav aria-label="Aggregate Operation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#aggregate-properties class=md-nav__link> Aggregate Properties </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#write-operator class=md-nav__link> Write Operator </a> <nav class=md-nav aria-label="Write Operator"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#write-properties class=md-nav__link> Write Properties </a> </li> <li class=md-nav__item> <a href=#write-definition-types class=md-nav__link> Write Definition Types </a> <nav class=md-nav aria-label="Write Definition Types"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#virtual-table_1 class=md-nav__link> Virtual Table </a> </li> <li class=md-nav__item> <a href=#files-type_1 class=md-nav__link> Files Type </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#discussion-points class=md-nav__link> Discussion Points </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../physical_relations/ class=md-nav__link> Physical Relations </a> </li> <li class=md-nav__item> <a href=../user_defined_relations/ class=md-nav__link> User Defined Relations </a> </li> <li class=md-nav__item> <a href=../embedded_relations/ class=md-nav__link> Embedded Relations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 data-md-state=indeterminate type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6> Serialization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Serialization data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Serialization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../serialization/binary_serialization/ class=md-nav__link> Binary Serialization </a> </li> <li class=md-nav__item> <a href=../../serialization/text_serialization/ class=md-nav__link> Text Serialization </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 data-md-state=indeterminate type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7> Extensions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Extensions data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../extensions/ class=md-nav__link> Extensions </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../community/ class=md-nav__link> Community </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=logical-relations>Logical Relations<a class=headerlink href=#logical-relations title="Permanent link">&para;</a></h1> <h2 id=read-operator>Read Operator<a class=headerlink href=#read-operator title="Permanent link">&para;</a></h2> <p>The read operator is an operator that produces one output. A simple example would be the reading of a Parquet file. It is expected that many types of reads will be added over time</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>0</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>N/A (no inputs)</td> </tr> <tr> <td>Direct Output Order</td> <td>Defaults to the schema of the data read after the optional projection (masked complex expression) is applied.</td> </tr> </tbody> </table> <h3 id=read-properties>Read Properties<a class=headerlink href=#read-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Definition</td> <td>The contents of the read property definition.</td> <td>Required</td> </tr> <tr> <td>Direct Schema</td> <td>Defines the schema of the output of the read (before any emit remapping/hiding).</td> <td>Required</td> </tr> <tr> <td>Filter</td> <td>A boolean Substrait expression that describes the filter of a iceberg dataset. TBD: define how field referencing works.</td> <td>Optional, defaults to none.</td> </tr> <tr> <td>Projection</td> <td>A masked complex expression describing the portions of the content that should be read</td> <td>Optional, defaults to all of schema</td> </tr> <tr> <td>Output properties</td> <td>Declaration of orderedness and/or distribution properties this read produces</td> <td>Optional, defaults to no properties.</td> </tr> <tr> <td>Properties</td> <td>A list of name/value pairs associated with the read</td> <td>Optional, defaults to empty</td> </tr> </tbody> </table> <h3 id=read-definition-types>Read Definition Types<a class=headerlink href=#read-definition-types title="Permanent link">&para;</a></h3> <p>Read definition types are built by the community and added to the specification. This is a portion of specification that is expected to grow rapidly.</p> <h4 id=virtual-table>Virtual Table<a class=headerlink href=#virtual-table title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Data</td> <td>Required</td> <td>Required</td> </tr> </tbody> </table> <h4 id=files-type>Files Type<a class=headerlink href=#files-type title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Items</td> <td>An array Items (path or path glob) associated with the read</td> <td>Required</td> </tr> <tr> <td>Format per item</td> <td>Enumeration of available formats. Only current option is PARQUET.</td> <td>Required</td> </tr> <tr> <td>Slicing parameters per item</td> <td>Information to use when reading a slice of a file.</td> <td>Optional</td> </tr> </tbody> </table> <h5 id=slicing-files>Slicing Files<a class=headerlink href=#slicing-files title="Permanent link">&para;</a></h5> <p>A read operation may only read part of a file. This is convenient, for example, when distributing a read operation across several nodes. The slicing parameters are specified as byte offsets into the file.</p> <p>Many file formats consist of indivisible &ldquo;chunks&rdquo; of data (e.g. parquet row groups). If this happens the consumer can determine which slice a particular chunk belongs to. For example, one possible approach is that a chunk should only be read if the midpoint of the chunk (dividing by 2 and rounding down) is contained within the asked-for byte range.</p> <h2 id=filter-operation>Filter Operation<a class=headerlink href=#filter-operation title="Permanent link">&para;</a></h2> <p>The filter operator eliminates one or more records from the input data based on a boolean filter expression.</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>1</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Orderedness, Distribution, remapped by emit</td> </tr> <tr> <td>Direct Output Order</td> <td>The field order as the input.</td> </tr> </tbody> </table> <h3 id=filter-properties>Filter Properties<a class=headerlink href=#filter-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Input</td> <td>The relational input</td> <td>Required</td> </tr> <tr> <td>Expression</td> <td>A boolean expression which describes which records are included/excluded.</td> <td>Required</td> </tr> </tbody> </table> <h2 id=sort-operation>Sort Operation<a class=headerlink href=#sort-operation title="Permanent link">&para;</a></h2> <p>The sort operator reorders a dataset based on one or more identified sort fields as well as a sorting function. </p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>1</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Will update orderedness property to the output of the sort operation. Distribution property only remapped based on emit.</td> </tr> <tr> <td>Direct Output Order</td> <td>The field order of the input.</td> </tr> </tbody> </table> <h3 id=sort-properties>Sort Properties<a class=headerlink href=#sort-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Input</td> <td>The relational input</td> <td>Required</td> </tr> <tr> <td>Sort Fields</td> <td>List of one or more fields to sort by. Uses the same properties as the <a href=../basics/#orderedness>orderedness</a> property.</td> <td>One sort field required</td> </tr> </tbody> </table> <h2 id=project-operation>Project Operation<a class=headerlink href=#project-operation title="Permanent link">&para;</a></h2> <p>The project operation will produce one or more additional expressions based on the inputs of the dataset.</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>1</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Distribution maintained, mapped by emit. Orderedness: Maintained if no window operations. Extended to include projection fields if fields are direct references. If window operations are present, no orderedness is maintained.</td> </tr> <tr> <td>Direct Output Order</td> <td>The field order of the input + the list of new expressions in the order they are declared in the expressions list.</td> </tr> </tbody> </table> <h3 id=project-properties>Project Properties<a class=headerlink href=#project-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Input</td> <td>The relational input</td> <td>Required</td> </tr> <tr> <td>Expressions</td> <td>List of one or more expressions to add to the input.</td> <td>At least one expression required</td> </tr> </tbody> </table> <h2 id=cross-product-operation>Cross Product Operation<a class=headerlink href=#cross-product-operation title="Permanent link">&para;</a></h2> <p>The cross product operation will combine two separate inputs into a single output. It pairs every record from the left input with every record of the right input.</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>2</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Distribution is maintained. Orderedness is empty post operation.</td> </tr> <tr> <td>Direct Output Order</td> <td>The emit order of the left input followed by the emit order of the right input.</td> </tr> </tbody> </table> <h3 id=cross-product-properties>Cross Product Properties<a class=headerlink href=#cross-product-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Left Input</td> <td>A relational input.</td> <td>Required</td> </tr> <tr> <td>Right Input</td> <td>A relational input.</td> <td>Required</td> </tr> </tbody> </table> <h2 id=join-operation>Join Operation<a class=headerlink href=#join-operation title="Permanent link">&para;</a></h2> <p>The join operation will combine two separate inputs into a single output, based on a join expression. A common subtype of joins is a equality join where the join expression is constrained to a list of equality (or equality + null equality) conditions between the two inputs of the join.</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>2</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Distribution is maintained. Orderedness is empty post operation. Physical relations may provide better property maintenance.</td> </tr> <tr> <td>Direct Output Order</td> <td>The emit order of the left input followed by the emit order of the right input.</td> </tr> </tbody> </table> <h3 id=join-properties>Join Properties<a class=headerlink href=#join-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Left Input</td> <td>A relational input.</td> <td>Required</td> </tr> <tr> <td>Right Input</td> <td>A relational input.</td> <td>Required</td> </tr> <tr> <td>Join Expression</td> <td>A boolean condition that describes whether each record from the left set &ldquo;match&rdquo; the record from the right set. Field references correspond to the direct output order of the data.</td> <td>Required. Can be the literal True.</td> </tr> <tr> <td>Join Type</td> <td>One of the join types defined below.</td> <td>Required</td> </tr> </tbody> </table> <h3 id=join-types>Join Types<a class=headerlink href=#join-types title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Inner</td> <td>Return records from the left side only if they match the right side. Return records from the right side only when they match the left side. For each cross input match, return a record including the data from both sides. Non-matching records are ignored.</td> </tr> <tr> <td>Outer</td> <td>Return all records from both the left and right inputs. For each cross input match, return a record including the data from both sides. For any remaining non-match records, return the record from the corresponding input along with nulls for the opposite input.</td> </tr> <tr> <td>Left</td> <td>Return all records from the left input. For each cross input match, return a record including the data from both sides. For any remaining non-matching records from the left input, return the left record along with nulls for the right input.</td> </tr> <tr> <td>Right</td> <td>Return all records from the right input. For each cross input match, return a record including the data from both sides. For any remaining non-matching records from the right input, return the left record along with nulls for the right input.</td> </tr> <tr> <td>Semi</td> <td>Returns records from the left input. These are returned only if the records have a join partner on the right side.</td> </tr> <tr> <td>Anti</td> <td>Return records from the left input. These are returned only if the records do not have a join partner on the right side.</td> </tr> <tr> <td>Single</td> <td>Returns one join partner per entry on the left input. If more than one join partner exists, there are two valid semantics. 1) Only the first match is returned. 2) The system throws an error. If there is no match between the left and right inputs, NULL is returned.</td> </tr> </tbody> </table> <h2 id=set-operation>Set Operation<a class=headerlink href=#set-operation title="Permanent link">&para;</a></h2> <p>The set operation ecompasses several set level operations that support combining datasets based, possibly excluding records based on various types of record level matching.</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>2 or more</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Maintains distribution if all inputs have the same ordinal distribution. Orderness is not maintained.</td> </tr> <tr> <td>Direct Output Order</td> <td>All inputs are ordinally matched and returned together. All inputs must have matching record types.</td> </tr> </tbody> </table> <h3 id=set-properties>Set Properties<a class=headerlink href=#set-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Primary Input</td> <td>The primary input of the dataset</td> <td>Required</td> </tr> <tr> <td>Secondary Inputs</td> <td>One or more relational inputs</td> <td>At least one required</td> </tr> <tr> <td>Set Operation Type</td> <td>From list below.</td> <td>Required</td> </tr> </tbody> </table> <h3 id=set-operation-types>Set Operation Types<a class=headerlink href=#set-operation-types title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Minus (Primary)</td> <td>Returns the primary input excluding any matching records from secondary inputs.</td> </tr> <tr> <td>Minus (Multiset)</td> <td>Returns the primary input minus any records that are included in all sets.</td> </tr> <tr> <td>Intersection (Primary)</td> <td>Returns all rows primary rows that intersect at least one secondary input.</td> </tr> <tr> <td>Intersection (Multiset)</td> <td>Returns all rows that intersect at least one record from each secondary inputs.</td> </tr> <tr> <td>Union Distinct</td> <td>Returns all the records from each set, removing any rows that are duplicated (within or across sets).</td> </tr> <tr> <td>Union All</td> <td>Returns all records from each set, allowing duplicates.</td> </tr> </tbody> </table> <h2 id=fetch-operation>Fetch Operation<a class=headerlink href=#fetch-operation title="Permanent link">&para;</a></h2> <p>The fetch operation eliminates records outside a desired window. Typically corresponds to a fetch/offset SQL clause. Will only returns records between the start offset and the end offset.</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>2 or more</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Maintains distribution and orderedness.</td> </tr> <tr> <td>Direct Output Order</td> <td>Unchanged from input.</td> </tr> </tbody> </table> <h3 id=fetch-properties>Fetch Properties<a class=headerlink href=#fetch-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Input</td> <td>A relational input, typically with a desired orderedness property.</td> <td>Required</td> </tr> <tr> <td>Offset</td> <td>A positive integer. Declares the offset for retrieval of records.</td> <td>Optional, defaults to 0.</td> </tr> <tr> <td>Count</td> <td>A positive integer. Declares the number of records that should be returned.</td> <td>Required</td> </tr> </tbody> </table> <h2 id=aggregate-operation>Aggregate Operation<a class=headerlink href=#aggregate-operation title="Permanent link">&para;</a></h2> <p>The aggregate operation groups input data on one or more sets of grouping keys, calculating each measure for each combination of grouping key.</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>1</td> </tr> <tr> <td>Outputs</td> <td>1</td> </tr> <tr> <td>Property Maintenance</td> <td>Maintains distribution if all distribution fields are contained in every grouping set. No orderness guaranteed.</td> </tr> <tr> <td>Direct Output Order</td> <td>The list of distinct columns from each grouping set (ordered by their first appearance) followed by the list of measures in declaration order, followed by a integer describing the associated particular grouping set the value is derived from.</td> </tr> </tbody> </table> <h3 id=aggregate-properties>Aggregate Properties<a class=headerlink href=#aggregate-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Input</td> <td>The relational input</td> <td>Required</td> </tr> <tr> <td>Grouping Sets</td> <td>One or more grouping sets</td> <td>Optional, required if no measures.</td> </tr> <tr> <td>Per Grouping Set</td> <td>A list of expression grouping that the aggregation measured should be calculated for.</td> <td>Optional, defaults to 0.</td> </tr> <tr> <td>Measures</td> <td>A list of one or more aggregate expressions along with an optional filter.</td> <td>Optional, required if no grouping sets.</td> </tr> </tbody> </table> <h2 id=write-operator>Write Operator<a class=headerlink href=#write-operator title="Permanent link">&para;</a></h2> <p>The write operator is an operator that consumes one output and writes it to storage. A simple example would be writing Parquet files. It is expected that many types of writes will be added over time</p> <table> <thead> <tr> <th>Signature</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td>Inputs</td> <td>1</td> </tr> <tr> <td>Outputs</td> <td>0</td> </tr> <tr> <td>Property Maintenance</td> <td>N/A (no output)</td> </tr> <tr> <td>Direct Output Order</td> <td>N/A (no output)</td> </tr> </tbody> </table> <h3 id=write-properties>Write Properties<a class=headerlink href=#write-properties title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Definition</td> <td>The contents of the write property definition.</td> <td>Required</td> </tr> <tr> <td>Field names</td> <td>The names of all struct fields in breadth-first order.</td> <td>Required</td> </tr> <tr> <td>Masked Complex Expression</td> <td>The masking expression applied to the input record prior to write.</td> <td>Optional, defaults to all</td> </tr> <tr> <td>Rotation description fields</td> <td>A list of fields that can be used for stream description whenever a stream is reset</td> <td>Optional, defaults to none.</td> </tr> <tr> <td>Rotation indicator</td> <td>An input field id that describes when the current stream should be &ldquo;rotated&rdquo;. Individual write definition types may support the ability to rotate the output into one or more streams. This could mean closing and opening a new file, finishing and restarting a TCP connection, etc. If a rotation indicator is available, it will be 0 except when a rotation should occur. Rotation indication are frequently defined by things like discrete partition values but could be done based on number of records or other arbitrary criteria. Typically</td> <td>Optional, defaults to none.</td> </tr> </tbody> </table> <h3 id=write-definition-types>Write Definition Types<a class=headerlink href=#write-definition-types title="Permanent link">&para;</a></h3> <p>Write definition types are built by the community and added to the specification. This is a portion of specification that is expected to grow rapidly.</p> <h4 id=virtual-table_1>Virtual Table<a class=headerlink href=#virtual-table_1 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Name</td> <td>The in memory name to give the dataset. When used in tandem</td> <td>Required</td> </tr> <tr> <td>Pin</td> <td>Whether it is okay to remove this dataset from memory or it should be kept in memory.</td> <td>Optional, defaults to false.</td> </tr> </tbody> </table> <h4 id=files-type_1>Files Type<a class=headerlink href=#files-type_1 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Property</th> <th>Description</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td>Path</td> <td>A uri to write the data to. Supports the inclusion of field references that are listed as available in properties as a &ldquo;rotation description field&rdquo;.</td> <td>Required</td> </tr> <tr> <td>Format</td> <td>Enumeration of available formats. Only current option is PARQUET.</td> <td>Required</td> </tr> </tbody> </table> <h2 id=discussion-points>Discussion Points<a class=headerlink href=#discussion-points title="Permanent link">&para;</a></h2> <ul> <li>How to handle correlated operations?</li> </ul> </article> </div> </div> </main> <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Application footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../basics/ title=Basics class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Basics </div> </div> </a> <!-- Link to next page --> <a href=../physical_relations/ title="Physical Relations" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Physical Relations </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <!-- Copyright and theme information --> <div class=md-footer-copyright> </div> <!-- Social links --> <div class=md-footer-social> <a href=https://twitter.com/substrait_io target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.instant", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.756773cc.min.js></script> </body> </html>